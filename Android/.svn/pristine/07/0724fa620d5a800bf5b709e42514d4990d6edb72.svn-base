package phone.gps.runnable;

import android.content.Context;

import phone.gps.obj.AuthenticationRequest;
import phone.gps.obj.User;
import phone.gps.webservice.AuthenticationService;

/**
 * Created by marco on 3/10/16.
 */
public class LoginRunnable implements Runnable {
    public static interface LoginInterface{
        void onComplete(AuthenticationRequest authenticationRequest);
        void onError(Exception ex);
    }

    private LoginInterface loginInterface;
    private User user;

    public LoginRunnable(User user,LoginInterface loginInterface){
        this.loginInterface=loginInterface;
        this.user=user;
    }

    @Override
    public void run() {
        AuthenticationRequest authRequest=new AuthenticationRequest();

        try{
            AuthenticationService authenticationService =new AuthenticationService();
            authRequest= authenticationService.doLogin(user);
        }catch (Exception ex){
            loginInterface.onError(ex);
        }

        loginInterface.onComplete(authRequest);
    }
}
